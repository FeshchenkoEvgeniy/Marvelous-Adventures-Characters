import{b as p,d as k,e as w,g as q}from"./assets/createMarkup-DP2Tw2iL.js";import{f as v,d as m,b as L}from"./assets/vendor-Cw4SvEfu.js";function C(){return window.innerWidth<=767?{limit:5,offset:0,requiredCharacters:5,currentCategory:"mobile"}:window.innerWidth<=1439?{limit:8,offset:0,requiredCharacters:8,currentCategory:"tablet"}:{limit:16,offset:0,requiredCharacters:16,currentCategory:"desktop"}}const M=document.querySelector("#date-picker"),E=document.querySelector(".js-filter-form"),s=document.querySelector(".js-characters-list"),b=document.querySelector(".js-main-character__btn"),u=document.querySelector(".js-loader"),f=document.querySelector("body"),y=document.querySelector(".notFound__box"),{limit:S,offset:_,requiredCharacters:j,currentCategory:F}=C(),r={limit:S,offset:_,requiredCharacters:j,currentCategory:F,total:0},o={comics:null,name:null,orderBy:null,date:null};function x(){const e=C();e.currentCategory!==r.currentCategory&&(r.currentCategory=e.currentCategory,r.limit=e.limit,r.offset=0,r.requiredCharacters=e.requiredCharacters,c(),s.innerHTML="")}function d(e,t){e?(u.style.display="block",f.style.pointerEvents="none"):(u.style.display="none",f.style.pointerEvents="all"),b.style.display=t?"block":"none"}function B(e){e?(y.style.display="",s.style.display="none"):(y.style.display="none",s.style.display="")}c();function D(e){const t=e.target;switch(t.name){case"comics":o.comics=t.value.replace(/[^0-9]/g,"");break;case"name":o.name=t.value;break;case"orderBy":o.orderBy=t.value.toLowerCase();break}r.offset=0,s.innerHTML="",c()}async function c(){let e=[];for(d(!0,!1);e.length<r.requiredCharacters;){try{const{data:t}=await p(o,r.offset,r.limit);r.total=t.total,B(!t.results.length);const a=t.results.filter(({thumbnail:{path:n}})=>!n.endsWith("image_not_available")&&!n.endsWith("4c002e0305708"));e=[...e,...a],r.offset+=r.limit}catch(t){console.log("Помилка під час запиту:",t);break}if(r.total<=r.offset){d(!1,!1);break}if(e.length>=r.requiredCharacters){e=e.slice(0,r.requiredCharacters),d(!1,!0);break}}s.insertAdjacentHTML("beforeend",k(e))}function Y(){c()}v(M,{defaultDate:new Date,allowInput:!0,onClose:(e,t,a)=>{if(W(t))o.date=t;else{Notiflix.Notify.failure("Invalid date format. Expected YYYY-MM-DD"),a.clear(),o.date=null;return}}});function W(e){return/^\d{4}-\d{2}-\d{2}$/.test(e)}b.addEventListener("click",Y);E.addEventListener("input",m(800,D));window.addEventListener("resize",m(1e3,x));const H=document.querySelector(".js-characters-list"),h=document.querySelector("body");function N(e){const t=e.target;if(t.classList.contains("js-characters-list"))return;const a=t.closest(".characters__item"),n=a==null?void 0:a.dataset.url;n?w(n).then(i=>{let l;L.create(q(i),{onShow(g){return l=T.bind(g),document.addEventListener("keydown",l),h.style.overflowY="hidden",!0},onClose(){return h.style.overflowY="",document.removeEventListener("keydown",l),!0}}).show()}).catch(i=>console.log(i)):console.error("URL not found")}function T(e){e.code==="Escape"&&this.close()}H.addEventListener("click",N);
//# sourceMappingURL=characters.js.map
